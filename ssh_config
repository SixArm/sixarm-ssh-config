##
# SSH config
#
# For details about these settings:
#
#     man ssh_config
#     man sshd_config
#
# Links to the man pages:
#
#  * http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/ssh_config.5
#  * http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/sshd_config.5
#
##

# TCPKeepAlive
#
# Specifies whether the system should send TCP keepalive messages to the
# other side. If they are sent, death of the connection or crash of one of
# the machines will be properly noticed. However, this means that
# connections will die if the route is down temporarily, and some people
# find it annoying.
#
# The default is "yes" (to send TCP keepalive messages), and the client
# will notice if the network goes down or the remote host dies. This is
# important in scripts, and many users want it too.
#
# To disable TCP keepalive messages, the value should be set to "no".
#
# Comment:
#
# TCPKeepAlive is dumb. It forces sessions to terminate after a time out.
# ClientAlive settings are probably closer to what most people want.
#
# http://www.noah.org/wiki/SSH_config
#
TCPKeepAlive no

# Compression
#
# Specifies whether compression is allowed, or delayed until the user
# has authenticated successfully.
#
# The argument must be "yes", "delayed", or "no".
#
# The default is "delayed". (N.b. this seems to vary on systems.)
#
# Comment Pro:
#
# Simple compression is easy for modern CPUs, and even on a fast
# network it is faster to compress data first before sending it over
# the network instead of leaving it uncompressed.
#
# How much faster is it? I used `cat some-50mb-long.log` to output the
# content of a 50mb log file directly to my ssh session and saw 3x speed
# on compressed data of a normal web server log file.
#
# http://blog.tcs.de/speed-up-ssh-connections-with-compression-on-os-x/
#
# Comment Con:
#
# When copying some large files between hosts at our rack I noticed
# some pretty poor transfer speeds. Having recently forked out $70 for
# a rack mount gigabit switch I wondered what was slowing things.
#
# It seems ssh was trying to help out by compressing everything
# however compressing the data took more than twice as long as
# transferring the uncompressed data. I proved this by disabling
# compression at the commandline and seeing the transfer speed more
# than triple.
#
# http://codemode.blogspot.com/2006/12/ssh-default-compression-can-slow-you.html
#
# Comment Con:
#
# Consider the disastrous impact of ssh's traffic compression, which
# surprisingly slows down the transfer of roughly 42% in the case of
# scp and even 270% in the tar over ssh test, and the tar gzip
# compression, which results in transfers being 87% faster over ssh
# and 134.38% over nc.
#
# http://www.spikelab.org/blog/transfer-largedata-scp-tarssh-tarnc-compared.html
#
# Comment Advice:
#
# These days, for most people, I'd suggest using it only as needed,
# typically for links of less than 5-10mbps and only when passing a
# lot of bulk data (transfers of not-already-compressed files, X11 or
# VNC forwarding, things like that).
#
# http://askubuntu.com/questions/6770/does-ssh-use-any-compression
#
# Conclusion:
#
# We set compression off. When we want compression, on a case-by-case basis,
# we set it per host, or set it on the command line by using the -C flag.
#
Compression no

# OpenSSH ClientAliveInterval
#
# Sets a timeout interval in seconds after which if no data has been
# received from the client, sshd will send a message through the
# encrypted channel to request a response from the client.
#
# The default is 0, indicating  messages will not be sent to the client.
#
# This option applies to protocol version 2 only.
#
# Comment:
#
# Using an OpenSSH server's ClientAliveInterval, it is possible for
# the ssh server to send periodic "keep alive" messages to the ssh
# client, keeping the connection open indefinitely. This is useful
# when a firewall or other packet filtering device drops idle
# connections after a certain period of time. Note that this is
# different from the KeepAlive directive in ssh_config.
#
# Client Alive messages are sent over the encrypted link, so they
# cannot be blocked or spoofed by a firewall. These settings tell
# the server to check the client every 30 seconds. If the client
# does not respond 40 times in a row then the session is closed.
# This allows for up to 20 minutes of network interruption.
#
ClientAliveInterval 30
ClientAliveCountMax 40

Host *
# This fixes slow logins. Don't use this if you use Kerberos or GSSAPI.
GSSAPIAuthentication no
# This helps prevent disconnects. Equivalent to the ClientAlive* settings on the serve
ServerAliveInterval 60
ServerAliveCountMax 120
# This is counter-intuitive. TCPKeepAlive should be set to no to help eliminate disconnects.
TCPKeepAlive no
# Allow agent authentication to chain through more than one server.
ForwardAgent yes
# This is equivalent to -X `ssh` option -- limited X11.
ForwardX11 yes
# This is equivalent to -Y `ssh` option -- unlimited X11. This can be compromise security.
# Note that both ForwardX11 and ForwardX11Trusted must be set to yes to silently compromise security.
# If you set only ForwardX11Trusted to yes then you still must use the '-Y' option on the ssh command-line.
#ForwardX11Trusted yes
# This passes some environment variables along to the remote host.
SendEnv LANG LC_*